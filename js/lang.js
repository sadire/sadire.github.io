const translations = {
  en: {
        awards: "Awards",
        skills: "Skills",
        summary: "Professional Summary",
        current_state: "Current State",
        unannounced_title: "Unannounced Project",
        education: "Education",
        work_exp: "Work Experience",
        download_pdf: "Download PDF",
        resume: "Resume",
    about: "About",
    projects: "Projects",
    unannounced: "Unannounced",
    about_title: "About Me",
    about_body: "I am a level and game designer, artist, and creative collaborator with 16 years of experience crafting worlds and gameplay that spark the joy of imagination.",
    projects_title: "Projects",
    card1_body: "A joyful space shooter where creativity meets chaos.",
    card2_body: "A deep‑sea dystopian adventure revered worldwide.",
    what_i_did: "What I Did",
    challenges: "Challenges & Solutions",
    trivia: "Trivia",
    current_state: "Current State",
    vision: "Vision",
        resume_title: "Resume",
        resume_summary_title: "Summary",
        resume_summary_body: "Technical Designer with experience in level design and game prototyping. QA roots give me a quality‑first mindset, spotting issues early and ensuring a high standard of polish. Extensive work with Unity, Unreal Engine and Jira, plus hands‑on VR development. I bridge creative design and technical execution so ideas become enjoyable gameplay.",
        resume_experience_title: "Experience",
        resume_job1_title: "Game Designer &amp; Producer · Casual Brothers Ltd (Feb 2025 – Present)",
        resume_job1_body: "<li>Lead design vision and production planning for a multiplayer title.</li><li>Coordinate an 8‑member team, hitting milestones with quality.</li>",
        resume_job2_title: "Game Developer · Sala Scala (Nov 2024 – Feb 2025)",
        resume_job2_body: "<li>Implemented VR mechanics for immersive educational experiences.</li><li>Collaborated with University of La Laguna on a European gamification project.</li>",
        resume_job3_title: "Technical Designer / QA · No Brakes Games (May 2021 – Nov 2024)",
        resume_job3_body: "<li>Prototyped physics systems in Unity for *Human: Fall Flat*.</li><li>Led QA, cutting critical bugs by 30 %.</li>",
        resume_job4_title: "Independent Developer (May 2021 – Feb 2023)",
        resume_job4_body: "<li>Created and published 3 prototypes on itch.io; full‑stack dev + QA.</li>",
        resume_education_title: "Education",
        resume_ed1_title: "Dual Master in Game Design &amp; Programming · Universal Arts School (2020 – 2021)",
        resume_ed2_title: "B.A. Conservation &amp; Restoration · University of La Laguna (2016 – 2020)",
        resume_skills_title: "Core Skills",
        resume_skills_list: "<li>Game Design</li><li>Prototyping</li><li>Game Development</li><li>QA &amp; Testing</li>",
        resume_lang_title: "Languages",
        resume_lang_list: "Spanish (Native) · English (Full Professional)",
        resume_volunteer_title: "Volunteer",
        resume_volunteer_body: "Vice President · Canary Islands Game Dev Association",
        resume_contact_title: "Contact",
        resume_contact_body: "Las Palmas de Gran Canaria · +34 665 542 694 · sadire.95@gmail.com · LinkedIn",
        resume_download_pdf: "Download PDF",
        resume_download_pdf: "Download PDF",
        cv_name: "SAMUEL DÍAZ – Technical Game Designer",
        cv_summary_title: "SUMMARY",
        cv_summary_body: "Technical Game Designer with 4+ years bridging design vision and technical implementation in Unity and Unreal.",
        cv_experience_title: "EXPERIENCE",
        cv_exp1_title: "Game Designer & Producer · Casual Brothers Ltd · Feb 2025–Present",
        cv_exp1_body: "Lead the design direction and production planning for an 8‑member team on a co‑op multiplayer project.",
        cv_exp2_title: "Game Developer · Sala Scala · Nov 2024–Feb 2025",
        cv_exp2_body: "Implemented VR mechanics for escape‑room attractions and coordinated with academic partners.",
        cv_exp3_title: "Technical Designer / QA · No Brakes Games · May 2021–Nov 2024",
        cv_exp3_body: "Prototyped physics systems for *Human: Fall Flat* and led QA, cutting critical bugs by 30 %.",
        cv_education_title: "EDUCATION",
        cv_edu1: "Dual Master in Game Design & Programming – Universal Arts School · 2020–2021",
        cv_edu2: "B.A. Conservation & Restoration – University of La Laguna · 2016–2020",
        cv_skills_title: "CORE SKILLS",
        cv_skills_body: "Game Design • Prototyping • C# • Unreal Blueprints • FMOD • QA & Testing",
        cv_languages_title: "LANGUAGES",
        cv_languages_body: "Spanish (Native), English (Full Professional)",
        cv_volunteer_title: "VOLUNTEER",
        cv_volunteer_body: "Vice President – Canary Islands Game‑Dev Association (ACDEV)",
        cv_contact_title: "CONTACT",
        cv_contact_body: "Las Palmas de Gran Canaria · +34 665 542 694 · sadire.95@gmail.com · LinkedIn",},
  es: {
        awards: "Premios y reconocimientos",
        skills: "Competencias",
        summary: "Resumen profesional",
        current_state: "Estado actual",
        unannounced_title: "Proyecto sin anunciar",
        education: "Formación académica",
        work_exp: "Experiencia laboral",
        download_pdf: "Descargar PDF",
        resume: "Currículum",
    about: "Sobre mí",
    projects: "Proyectos",
    unannounced: "Sin anunciar",
    about_title: "Sobre mí",
    about_body: "Soy diseñador de niveles y videojuegos con 16 años de experiencia creando mundos y mecánicas que despiertan la imaginación.",
    projects_title: "Proyectos",
    card1_body: "Un shooter espacial colorido donde la creatividad se encuentra con el caos.",
    card2_body: "Una aventura distópica submarina aclamada mundialmente.",
    what_i_did: "Qué hice",
    challenges: "Desafíos y soluciones",
    trivia: "Trivia",
    current_state: "Estado actual",
    vision: "Visión",
        resume_title: "Currículum",
        resume_summary_title: "Extracto",
        resume_summary_body: "Technical Designer con experiencia en diseño de niveles y prototipado de juegos. Mi trayectoria en QA me aporta una mentalidad orientada a la calidad que detecta problemas temprano y garantiza un alto estándar de pulido. Experto en Unity, Unreal Engine y Jira, con experiencia práctica en VR. Puento la brecha entre el diseño creativo y la implementación técnica para convertir ideas en experiencias jugables.",
        resume_experience_title: "Experiencia",
        resume_job1_title: "Game Designer y Producer · Casual Brothers Ltd (feb 2025 – Presente)",
        resume_job1_body: "<li>Lidero visión de diseño y planificación de producción para título multijugador.</li><li>Coordino equipo de 8 personas; cumplimos hitos con calidad y a tiempo.</li>",
        resume_job2_title: "Desarrollador de videojuegos · Sala Scala (nov 2024 – feb 2025)",
        resume_job2_body: "<li>Implementé mecánicas VR para experiencias educativas inmersivas.</li><li>Colaboré con la Univ. de La Laguna en proyecto europeo de gamificación.</li>",
        resume_job3_title: "Technical Designer / QA · No Brakes Games (may 2021 – nov 2024)",
        resume_job3_body: "<li>Prototipé sistemas de físicas en Unity para *Human: Fall Flat*.</li><li>Lideré QA, reduciendo bugs críticos en un 30 %.</li>",
        resume_job4_title: "Desarrollador independiente (may 2021 – feb 2023)",
        resume_job4_body: "<li>Creé y publiqué 3 prototipos en itch.io; full‑stack desarrollo + QA.</li>",
        resume_education_title: "Educación",
        resume_ed1_title: "Doble máster en Diseño y Programación · Universal Arts School (2020 – 2021)",
        resume_ed2_title: "Grado en Conservación y Restauración · Universidad de La Laguna (2016 – 2020)",
        resume_skills_title: "Aptitudes principales",
        resume_skills_list: "<li>Game Design</li><li>Prototipado</li><li>Game Development</li><li>QA &amp; Testing</li>",
        resume_lang_title: "Idiomas",
        resume_lang_list: "Español (Nativo) · Inglés (Profesional Completo)",
        resume_volunteer_title: "Voluntariado",
        resume_volunteer_body: "Vicepresidente · Asociación Canaria de Desarrolladores de Videojuegos",
        resume_contact_title: "Contactar",
        resume_contact_body: "Las Palmas de Gran Canaria · +34 665 542 694 · sadire.95@gmail.com · LinkedIn",
        resume_download_pdf: "Descargar PDF",
        resume_download_pdf: "Descargar PDF",
        cv_name: "SAMUEL DÍAZ – Technical Game Designer",
        cv_summary_title: "EXTRACTO",
        cv_summary_body: "Technical Game Designer con más de 4 años uniendo visión de diseño e implementación técnica en Unity y Unreal.",
        cv_experience_title: "EXPERIENCIA",
        cv_exp1_title: "Game Designer y Producer · Casual Brothers Ltd · feb 2025–Presente",
        cv_exp1_body: "Dirijo la visión de diseño y la planificación de producción de un equipo de 8 personas en un proyecto cooperativo multijugador.",
        cv_exp2_title: "Desarrollador de videojuegos · Sala Scala · nov 2024–feb 2025",
        cv_exp2_body: "Implementé mecánicas VR para atracciones de escape‑room y coordiné con socios académicos.",
        cv_exp3_title: "Technical Designer / QA · No Brakes Games · may 2021–nov 2024",
        cv_exp3_body: "Prototipé sistemas de físicas para *Human: Fall Flat* y lideré QA, reduciendo los bugs críticos en un 30 %.",
        cv_education_title: "FORMACIÓN",
        cv_edu1: "Doble Máster en Diseño y Programación – Universal Arts School · 2020–2021",
        cv_edu2: "Grado en Conservación y Restauración – Universidad de La Laguna · 2016–2020",
        cv_skills_title: "APTITUDES",
        cv_skills_body: "Game Design • Prototipado • C# • Blueprints de Unreal • FMOD • QA & Testing",
        cv_languages_title: "IDIOMAS",
        cv_languages_body: "Español (Nativo), Inglés (Profesional Completo)",
        cv_volunteer_title: "VOLUNTARIADO",
        cv_volunteer_body: "Vicepresidente – Asociación Canaria de Desarrolladores de Videojuegos (ACDEV)",
        cv_contact_title: "CONTACTO",
        cv_contact_body: "Las Palmas de Gran Canaria · +34 665 542 694 · sadire.95@gmail.com · LinkedIn",}
};

const langSelect = document.getElementById('lang-select');

// Persist language choice
const storedLang = localStorage.getItem('lang') || (langSelect ? langSelect.value : 'es');
if(langSelect) langSelect.value = storedLang;

function updateLang(lang){
  document.documentElement.lang = lang;
  document.querySelectorAll('[data-i18n]').forEach(el=>{
    const key = el.dataset.i18n;
    if(translations[lang] && translations[lang][key]) el.textContent = translations[lang][key];
  });
}

updateLang(storedLang);

if(langSelect){
  langSelect.addEventListener('change',e=>{
    const newLang = e.target.value;
    localStorage.setItem('lang', newLang);
    updateLang(newLang);
  });
}

// Burger menu toggle (kept)
const burgerBtn = document.getElementById('burger');
if(burgerBtn){
  burgerBtn.addEventListener('click', ()=>{
    document.querySelector('.nav-links').classList.toggle('open');
  });
}


// Set active nav link based on current path
document.querySelectorAll('.nav-links a').forEach(link=>{
  const linkPath = link.getAttribute('href').replace(/\.\./g,'').replace(/index\.html/,'');
  if(window.location.pathname.endsWith(linkPath) || (window.location.pathname.endsWith('/') && linkPath==='')){
    link.classList.add('active');
  }
});

// Highlight active page link
(function(){
  const currentPath = window.location.pathname.replace(/\/index\.html$/, '').replace(/\/$/, '');
  document.querySelectorAll('.nav-links a').forEach(link=>{
    const url = new URL(link.href, window.location.origin);
    let linkPath = url.pathname.replace(/\/index\.html$/, '').replace(/\/$/, '');
    // For root index sections (#about etc.) treat as same page
    if(currentPath === '' && (link.hash === '#about' || link.hash === '#projects')){
      if(link.hash === window.location.hash || (window.location.hash==='' && link.hash==='#about')){
        link.classList.add('active');
      }
    }else if(linkPath === currentPath){
      link.classList.add('active');
    }
  });
})();
// Active nav underline
function setActiveLink(){
  const links = document.querySelectorAll('.nav-links a');
  links.forEach(l=>l.classList.remove('active'));
  const path = window.location.pathname.replace(/\/index\.html$/, '').replace(/\/$/, '');
  const hash = window.location.hash;

  let key = '';
  if(path === '' || path === '/'){
     key = (hash === '#projects') ? '#projects' : '#about';
  }else if(path.endsWith('/unannounced.html')){
     key = 'unannounced.html';
  }else if(path.endsWith('/resume.html')){
     key = 'resume.html';
  }else if(path.includes('/projects/')){
     key = 'projects';
  }

  links.forEach(link=>{
    const href = link.getAttribute('href');
    if((hash && href.endsWith(hash) && key.startsWith('#')) ||
       (!hash && key.startsWith('#') && href.endsWith('#about')) ||
       (href.endsWith(key))){
       link.classList.add('active');
    }
  });
}

setActiveLink();
window.addEventListener('hashchange', setActiveLink);

// Smooth scroll nav
document.querySelectorAll('.nav-links a[href^="#"]').forEach(link=>{
  link.addEventListener('click', e=>{
    e.preventDefault();
    const id = link.getAttribute('href');
    const target = document.querySelector(id);
    if(target){
      target.scrollIntoView({behavior:'smooth', block:'center'});
      history.pushState(null,'',id);
      setActiveLink();
    }
  });
});

window.addEventListener('load', ()=>{
  if(location.hash && document.querySelector(location.hash)){
    document.querySelector(location.hash).scrollIntoView({behavior:'instant', block:'center'});
  }
});
// End smooth scroll


// Toggle visibility of blocks with data-lang attribute
function toggleLangBlocks(lang){
  document.querySelectorAll('[data-lang]').forEach(el=>{
    el.style.display = (el.dataset.lang === lang) ? '' : 'none';
  });
}
toggleLangBlocks(storedLang);

document.body.classList.add('lang-ready');

if(langSelect){
  langSelect.addEventListener('change', e=>{
    toggleLangBlocks(e.target.value);
  }, {once:false});
}


const overlay = document.getElementById('overlay');
function toggleMenu(){
  document.querySelector('.nav-links').classList.toggle('open');
  overlay && overlay.classList.toggle('show');
}
if(burgerBtn){
  burgerBtn.addEventListener('click', toggleMenu);
}
overlay && overlay.addEventListener('click', toggleMenu);
